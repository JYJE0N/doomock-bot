// src/data/FortuneInterpretations.js - íƒ€ë¡œ í•´ì„ ì „ë¬¸ ë°ì´í„°

/**
 * ğŸ”® íƒ€ë¡œ í•´ì„ ì „ë¬¸ ë°ì´í„°
 * ê° ìƒí™©ë³„, ì¡°í•©ë³„ í•´ì„ì„ ì œê³µí•©ë‹ˆë‹¤
 */

// ğŸ¯ ì§ˆë¬¸ ì¹´í…Œê³ ë¦¬ë³„ í•´ì„
const QUESTION_CATEGORIES = {
  love: {
    name: "ì‚¬ë‘ê³¼ ì—°ì• ",
    keywords: ["ì‚¬ë‘", "ì—°ì• ", "ê´€ê³„", "ì§ì‚¬ë‘", "ì´ë³„", "ì¬íšŒ"],
    interpretations: {
      // ë©”ì´ì € ì•„ë¥´ì¹´ë‚˜ íŠ¹ë³„ í•´ì„
      "The Fool": {
        upright:
          "ìƒˆë¡œìš´ ì‚¬ë‘ì´ ì‹œì‘ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìˆœìˆ˜í•œ ë§ˆìŒìœ¼ë¡œ ë‹¤ê°€ê°€ì„¸ìš”.",
        reversed:
          "ì„±ê¸‰í•œ íŒë‹¨ì€ ê¸ˆë¬¼ì…ë‹ˆë‹¤. ìƒëŒ€ë¥¼ ë” ì•Œì•„ê°€ëŠ” ì‹œê°„ì´ í•„ìš”í•©ë‹ˆë‹¤."
      },
      "The Lovers": {
        upright: "ìš´ëª…ì ì¸ ë§Œë‚¨ì´ë‚˜ ì¤‘ìš”í•œ ì„ íƒì˜ ìˆœê°„ì…ë‹ˆë‹¤. ì§„ì‹¬ì„ ë”°ë¥´ì„¸ìš”.",
        reversed: "ê´€ê³„ì˜ ë¶ˆê· í˜•ì´ë‚˜ ê°€ì¹˜ê´€ ì°¨ì´ë¥¼ í•´ê²°í•´ì•¼ í•©ë‹ˆë‹¤."
      },
      "The Star": {
        upright:
          "í¬ë§ì ì¸ ë¯¸ë˜ê°€ ê¸°ë‹¤ë¦½ë‹ˆë‹¤. ìƒëŒ€ë¥¼ ì‹ ë¢°í•˜ê³  ê¸ì •ì ìœ¼ë¡œ ë‚˜ì•„ê°€ì„¸ìš”.",
        reversed: "ì‹¤ë§ê°ì„ ê·¹ë³µí•˜ê³  ìì¡´ê°ì„ íšŒë³µí•  ì‹œê°„ì´ í•„ìš”í•©ë‹ˆë‹¤."
      }
    }
  },

  career: {
    name: "ì§ì—…ê³¼ ê²½ë ¥",
    keywords: ["ì§ì¥", "ì¼", "ìŠ¹ì§„", "ì´ì§", "ì‚¬ì—…", "ê²½ë ¥"],
    interpretations: {
      "The Emperor": {
        upright:
          "ë¦¬ë”ì‹­ì„ ë°œíœ˜í•  ë•Œì…ë‹ˆë‹¤. ì²´ê³„ì ì¸ ê³„íšìœ¼ë¡œ ëª©í‘œë¥¼ ë‹¬ì„±í•˜ì„¸ìš”.",
        reversed: "ê²½ì§ëœ ì¡°ì§ë¬¸í™”ë‚˜ ê¶Œìœ„ì ì¸ ìƒì‚¬ì™€ì˜ ê°ˆë“±ì„ ì¡°ì‹¬í•˜ì„¸ìš”."
      },
      "Eight of Pentacles": {
        upright:
          "ì „ë¬¸ì„±ì„ í‚¤ìš°ê¸° ì¢‹ì€ ì‹œê¸°ì…ë‹ˆë‹¤. ê¾¸ì¤€í•œ ë…¸ë ¥ì´ ê²°ì‹¤ì„ ë§ºì„ ê²ƒì…ë‹ˆë‹¤.",
        reversed: "ë²ˆì•„ì›ƒì„ ì¡°ì‹¬í•˜ì„¸ìš”. ì¼ê³¼ ì‚¶ì˜ ê· í˜•ì´ í•„ìš”í•©ë‹ˆë‹¤."
      }
    }
  },

  money: {
    name: "ê¸ˆì „ê³¼ ì¬ë¬¼",
    keywords: ["ëˆ", "ì¬ì‚°", "íˆ¬ì", "ë¶€ì±„", "ìˆ˜ì…", "ì§€ì¶œ"],
    interpretations: {
      "Ace of Pentacles": {
        upright:
          "ìƒˆë¡œìš´ ìˆ˜ì…ì›ì´ë‚˜ íˆ¬ì ê¸°íšŒê°€ ì°¾ì•„ì˜µë‹ˆë‹¤. ì‹ ì¤‘í•˜ê²Œ ê²€í† í•˜ì„¸ìš”.",
        reversed: "ê³„íší–ˆë˜ ìˆ˜ìµì´ ì§€ì—°ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆì‚° ê´€ë¦¬ì— ì‹ ê²½ì“°ì„¸ìš”."
      },
      "Ten of Pentacles": {
        upright:
          "ì¥ê¸°ì ì¸ ì¬ì • ì•ˆì •ì„ ì´ë£° ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê°€ì¡±ê³¼ í•¨ê»˜ ë²ˆì˜í•˜ì„¸ìš”.",
        reversed: "ê°€ì¡± ê°„ ì¬ì‚° ë¬¸ì œë‚˜ ìƒì† ê´€ë ¨ ê°ˆë“±ì„ ì¡°ì‹¬í•˜ì„¸ìš”."
      }
    }
  },

  health: {
    name: "ê±´ê°•ê³¼ ì›°ë¹™",
    keywords: ["ê±´ê°•", "ë³‘", "ì¹˜ë£Œ", "íšŒë³µ", "ìš´ë™", "ë‹¤ì´ì–´íŠ¸"],
    interpretations: {
      Strength: {
        upright:
          "ë‚´ë©´ì˜ í˜ìœ¼ë¡œ ê±´ê°•ì„ íšŒë³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê¸ì •ì ì¸ ë§ˆìŒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.",
        reversed:
          "ì²´ë ¥ ì €í•˜ë‚˜ ë©´ì—­ë ¥ ì•½í™”ë¥¼ ì¡°ì‹¬í•˜ì„¸ìš”. ì¶©ë¶„í•œ íœ´ì‹ì´ í•„ìš”í•©ë‹ˆë‹¤."
      },
      "The Sun": {
        upright: "í™œë ¥ì´ ë„˜ì¹˜ê³  ê±´ê°•ì´ í˜¸ì „ë©ë‹ˆë‹¤. ì•¼ì™¸ í™œë™ì´ ë„ì›€ì´ ë©ë‹ˆë‹¤.",
        reversed: "ê³¼ë¡œë‚˜ ìŠ¤íŠ¸ë ˆìŠ¤ë¡œ ì¸í•œ ë²ˆì•„ì›ƒì„ ì¡°ì‹¬í•˜ì„¸ìš”."
      }
    }
  },

  general: {
    name: "ì¼ë°˜ ìš´ì„¸",
    keywords: [],
    interpretations: {
      // ê¸°ë³¸ í•´ì„ì€ TarotData.jsì˜ meaning ì‚¬ìš©
    }
  }
};

// ğŸ´ ì¹´ë“œ ì¡°í•© í•´ì„
const CARD_COMBINATIONS = {
  // ë©”ì´ì € + ë©”ì´ì € ì¡°í•©
  "The Fool+The World": "í•œ ì‚¬ì´í´ì´ ëë‚˜ê³  ì™„ì „íˆ ìƒˆë¡œìš´ ì‹œì‘ì´ ë‹¤ê°€ì˜µë‹ˆë‹¤.",
  "The Magician+The High Priestess":
    "ì˜ì‹ê³¼ ë¬´ì˜ì‹ì˜ ì™„ë²½í•œ ì¡°í™”. ê°•ë ¥í•œ ì°½ì¡°ë ¥ì´ ë°œí˜„ë©ë‹ˆë‹¤.",
  "The Emperor+The Empress":
    "ê¶Œìœ„ì™€ í’ìš”ì˜ ì¡°í™”. ì•ˆì •ì ì¸ ì„±ì¥ê³¼ ë²ˆì˜ì„ ì•”ì‹œí•©ë‹ˆë‹¤.",
  "Death+The Tower":
    "ê¸‰ê²©í•˜ê³  ê·¼ë³¸ì ì¸ ë³€í™”. ê³¼ê±°ì™€ì˜ ì™„ì „í•œ ë‹¨ì ˆì´ í•„ìš”í•©ë‹ˆë‹¤.",
  "The Star+The Sun": "ë§¤ìš° ê¸ì •ì ì¸ ì¡°í•©. í¬ë§ì´ í˜„ì‹¤ì´ ë˜ëŠ” ì‹œê¸°ì…ë‹ˆë‹¤.",

  // ë©”ì´ì € + ë§ˆì´ë„ˆ ì¡°í•©
  "The Lovers+Two of Cups":
    "ê¹Šì€ ì‚¬ë‘ê³¼ ì™„ë²½í•œ íŒŒíŠ¸ë„ˆì‹­. ì†Œìš¸ë©”ì´íŠ¸ë¥¼ ë§Œë‚  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
  "The Tower+Five of Cups":
    "ì˜ˆìƒì¹˜ ëª»í•œ ìƒì‹¤. í•˜ì§€ë§Œ ì´ëŠ” ë” ë‚˜ì€ ë¯¸ë˜ë¥¼ ìœ„í•œ ê³¼ì •ì…ë‹ˆë‹¤.",
  "The World+Ten of Pentacles":
    "ë¬¼ì§ˆì , ì •ì‹ ì  ì™„ì„±. ëª¨ë“  ë©´ì—ì„œ í’ìš”ë¡œìš´ ì‹œê¸°ì…ë‹ˆë‹¤.",

  // ê°™ì€ ìˆ«ì ì¡°í•©
  "Ace+Ace": "ê°•ë ¥í•œ ìƒˆë¡œìš´ ì‹œì‘. ì—¬ëŸ¬ ë¶„ì•¼ì—ì„œ ë™ì‹œì— ê¸°íšŒê°€ ì°¾ì•„ì˜µë‹ˆë‹¤.",
  "Four+Four": "ì•ˆì •ê³¼ ì •ì²´. í˜„ìƒ ìœ ì§€ëŠ” ì¢‹ì§€ë§Œ ë³€í™”ë„ í•„ìš”í•©ë‹ˆë‹¤.",
  "Ten+Ten": "í•˜ë‚˜ì˜ í° ì‚¬ì´í´ì´ ì™„ì„±ë¨. ë‹¤ìŒ ë‹¨ê³„ë¡œ ë‚˜ì•„ê°ˆ ì¤€ë¹„ë¥¼ í•˜ì„¸ìš”."
};

// ğŸ”® íŠ¸ë¦¬í”Œ ì¹´ë“œ í•´ì„ í…œí”Œë¦¿
const TRIPLE_SPREAD_INTERPRETATIONS = {
  // ì‹œê°„ì˜ íë¦„ í•´ì„
  temporal: {
    past_influence: [
      "ê³¼ê±°ì˜ {card}ê°€ í˜„ì¬ ìƒí™©ì˜ ì”¨ì•—ì´ ë˜ì—ˆìŠµë‹ˆë‹¤.",
      "{card}ì˜ ê²½í—˜ì´ ë‹¹ì‹ ì„ ì„±ì¥ì‹œì¼°ìŠµë‹ˆë‹¤.",
      "ì§€ë‚˜ê°„ {card}ì˜ êµí›ˆì„ ê¸°ì–µí•˜ì„¸ìš”."
    ],
    present_situation: [
      "í˜„ì¬ {card}ì˜ ì—ë„ˆì§€ê°€ ê°•í•˜ê²Œ ì‘ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤.",
      "{card}ê°€ ë³´ì—¬ì£¼ëŠ” í˜„ì‹¤ì„ ì§ì‹œí•˜ì„¸ìš”.",
      "ì§€ê¸ˆì€ {card}ì˜ ì§€í˜œê°€ í•„ìš”í•œ ë•Œì…ë‹ˆë‹¤."
    ],
    future_potential: [
      "ë¯¸ë˜ì—ëŠ” {card}ì˜ ê²°ì‹¤ì„ ë§ºì„ ê²ƒì…ë‹ˆë‹¤.",
      "{card}ê°€ ì•”ì‹œí•˜ëŠ” ë¯¸ë˜ë¥¼ ì¤€ë¹„í•˜ì„¸ìš”.",
      "ì•ìœ¼ë¡œ {card}ì˜ ê¸°íšŒê°€ ì°¾ì•„ì˜¬ ê²ƒì…ë‹ˆë‹¤."
    ]
  },

  // ì „ì²´ì ì¸ íë¦„ í•´ì„
  flow_interpretations: {
    positive_flow:
      "ê³¼ê±°ì˜ êµí›ˆì„ ì˜ í™œìš©í•˜ì—¬ í˜„ì¬ë¥¼ ì¶©ì‹¤íˆ ì‚´ê³  ìˆìœ¼ë©°, ë°ì€ ë¯¸ë˜ê°€ ê¸°ë‹¤ë¦¬ê³  ìˆìŠµë‹ˆë‹¤.",
    challenging_flow:
      "ê³¼ê±°ì˜ ì–´ë ¤ì›€ì´ í˜„ì¬ì—ë„ ì˜í–¥ì„ ë¯¸ì¹˜ê³  ìˆì§€ë§Œ, ì´ë¥¼ ê·¹ë³µí•˜ë©´ ë” ë‚˜ì€ ë¯¸ë˜ê°€ ì—´ë¦´ ê²ƒì…ë‹ˆë‹¤.",
    transformative_flow:
      "ì§€ê¸ˆì€ í° ë³€í™”ì˜ ì‹œê¸°ì…ë‹ˆë‹¤. ê³¼ê±°ë¥¼ ë†“ì•„ì£¼ê³  ìƒˆë¡œìš´ ë¯¸ë˜ë¥¼ ë°›ì•„ë“¤ì´ì„¸ìš”.",
    stable_flow:
      "ì•ˆì •ì ì¸ íë¦„ ì†ì— ìˆìŠµë‹ˆë‹¤. í˜„ì¬ì˜ ë…¸ë ¥ì´ ë¯¸ë˜ì˜ ì„±ê³µìœ¼ë¡œ ì´ì–´ì§ˆ ê²ƒì…ë‹ˆë‹¤."
  }
};

// ğŸŒŸ ìº˜í‹± í¬ë¡œìŠ¤ í•´ì„ í…œí”Œë¦¿
const CELTIC_CROSS_INTERPRETATIONS = {
  // ê° í¬ì§€ì…˜ë³„ í•´ì„ ê°•í™”
  position_emphasis: {
    present: {
      major:
        "ì¸ìƒì˜ ì¤‘ìš”í•œ ì „í™˜ì ì— ì„œ ìˆìŠµë‹ˆë‹¤. {card}ì˜ ë©”ì‹œì§€ì— ê·€ ê¸°ìš¸ì´ì„¸ìš”.",
      wands: "ì—´ì •ê³¼ ì°½ì˜ì„±ì´ í•„ìš”í•œ ìƒí™©ì…ë‹ˆë‹¤. ì ê·¹ì ìœ¼ë¡œ í–‰ë™í•˜ì„¸ìš”.",
      cups: "ê°ì •ì ì¸ ë¬¸ì œê°€ í•µì‹¬ì…ë‹ˆë‹¤. ë§ˆìŒì˜ ì†Œë¦¬ë¥¼ ë“¤ì–´ë³´ì„¸ìš”.",
      swords: "ëª…í™•í•œ ì‚¬ê³ ì™€ ê²°ë‹¨ì´ í•„ìš”í•©ë‹ˆë‹¤. ì§„ì‹¤ì„ ì§ì‹œí•˜ì„¸ìš”.",
      pentacles: "í˜„ì‹¤ì ì´ê³  ì‹¤ìš©ì ì¸ ì ‘ê·¼ì´ í•„ìš”í•©ë‹ˆë‹¤. ê¸°ì´ˆë¥¼ íŠ¼íŠ¼íˆ í•˜ì„¸ìš”."
    },
    challenge: {
      major: "ë„˜ì–´ì•¼ í•  í° ì‚°ì´ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ëŠ” ì„±ì¥ì˜ ê¸°íšŒì…ë‹ˆë‹¤.",
      reversed: "ë‚´ë©´ì˜ ë¸”ë¡ì´ë‚˜ ì˜ëª»ëœ ì ‘ê·¼ì´ ë¬¸ì œì…ë‹ˆë‹¤. ê´€ì ì„ ë°”ê¿”ë³´ì„¸ìš”."
    },
    outcome: {
      positive: "ë…¸ë ¥ì´ ê²°ì‹¤ì„ ë§ºì–´ ì›í•˜ëŠ” ê²°ê³¼ë¥¼ ì–»ì„ ê²ƒì…ë‹ˆë‹¤.",
      neutral:
        "ì˜ˆìƒê³¼ëŠ” ë‹¤ë¥¸ ê²°ê³¼ê°€ ë‚˜ì˜¬ ìˆ˜ ìˆì§€ë§Œ, ì´ ë˜í•œ í•„ìš”í•œ ê²½í—˜ì…ë‹ˆë‹¤.",
      challenging: "ì–´ë ¤ì›€ì´ ì˜ˆìƒë˜ì§€ë§Œ, ì´ë¥¼ í†µí•´ ë” ê°•í•´ì§ˆ ê²ƒì…ë‹ˆë‹¤."
    }
  },

  // ì˜ì—­ë³„ ì¢…í•© í•´ì„
  area_synthesis: {
    center:
      "í˜„ì¬ ìƒí™©ê³¼ ë„ì „ ê³¼ì œê°€ ì„œë¡œ ì–½í˜€ ìˆìŠµë‹ˆë‹¤. ê· í˜•ì¡íŒ ì‹œê°ì´ í•„ìš”í•©ë‹ˆë‹¤.",
    timeline:
      "ê³¼ê±°ì—ì„œ ë¯¸ë˜ë¡œ ì´ì–´ì§€ëŠ” ëª…í™•í•œ íë¦„ì´ ë³´ì…ë‹ˆë‹¤. ì‹œê°„ì´ í•´ê²°í•´ì¤„ ê²ƒì…ë‹ˆë‹¤.",
    internal: "ë‚´ë©´ì˜ ì„±ì¥ê³¼ ìê¸° ì¸ì‹ì´ í•µì‹¬ì…ë‹ˆë‹¤. ìŠ¤ìŠ¤ë¡œë¥¼ ë¯¿ìœ¼ì„¸ìš”.",
    external: "ì£¼ë³€ í™˜ê²½ê³¼ì˜ ì¡°í™”ê°€ ì¤‘ìš”í•©ë‹ˆë‹¤. í˜¼ìê°€ ì•„ë‹˜ì„ ê¸°ì–µí•˜ì„¸ìš”."
  },

  // ì „ì²´ ìŠ¤í† ë¦¬ êµ¬ì„±
  story_templates: [
    {
      type: "hero_journey",
      template:
        "ë‹¹ì‹ ì€ {present}ì˜ ìƒí™©ì—ì„œ {challenge}ë¼ëŠ” ë„ì „ì— ì§ë©´í•´ ìˆìŠµë‹ˆë‹¤. {past}ì˜ ê²½í—˜ì´ í˜ì´ ë˜ì–´ì£¼ê³ , {approach}ì˜ ìì„¸ë¡œ ë‚˜ì•„ê°„ë‹¤ë©´, {outcome}ì˜ ê²°ê³¼ë¥¼ ì–»ì„ ê²ƒì…ë‹ˆë‹¤."
    },
    {
      type: "transformation",
      template:
        "{past}ì—ì„œ ì‹œì‘ëœ ë³€í™”ê°€ {present}ì—ì„œ ì •ì ì— ë‹¬í–ˆìŠµë‹ˆë‹¤. {challenge}ë¥¼ ê·¹ë³µí•˜ëŠ” ê³¼ì •ì—ì„œ {hopes_fears}ì™€ ë§ˆì£¼í•˜ê²Œ ë˜ì§€ë§Œ, ê¶ê·¹ì ìœ¼ë¡œ {outcome}ë¡œ ì´ì–´ì§ˆ ê²ƒì…ë‹ˆë‹¤."
    }
  ]
};

// ğŸ¨ ê°ì •ê³¼ ë¶„ìœ„ê¸°ë³„ í•´ì„
const MOOD_INTERPRETATIONS = {
  hopeful: {
    cards: ["The Star", "The Sun", "Ace of Cups", "Three of Cups"],
    message: "í¬ë§ì˜ ë¹›ì´ ë³´ì…ë‹ˆë‹¤. ê¸ì •ì ì¸ ì—ë„ˆì§€ê°€ ë‹¹ì‹ ì„ ê°ì‹¸ê³  ìˆìŠµë‹ˆë‹¤.",
    advice: "ì§€ê¸ˆì˜ ê¸ì •ì ì¸ ê¸°ìš´ì„ ìœ ì§€í•˜ë©° ê¿ˆì„ í–¥í•´ ë‚˜ì•„ê°€ì„¸ìš”."
  },

  challenging: {
    cards: ["The Tower", "Five of Cups", "Three of Swords", "Ten of Swords"],
    message: "ì‹œë ¨ì˜ ì‹œê¸°ì´ì§€ë§Œ, ì´ëŠ” ë” ë‚˜ì€ ë¯¸ë˜ë¥¼ ìœ„í•œ ì¤€ë¹„ ê³¼ì •ì…ë‹ˆë‹¤.",
    advice: "ì–´ë ¤ì›€ì„ ì„±ì¥ì˜ ê¸°íšŒë¡œ ì‚¼ê³ , ê³§ ì°¾ì•„ì˜¬ ìƒˆë²½ì„ ê¸°ë‹¤ë¦¬ì„¸ìš”."
  },

  transformative: {
    cards: ["Death", "The Tower", "Judgement", "Eight of Cups"],
    message:
      "í° ë³€í™”ì˜ ë¬¼ê²°ì´ ë‹¤ê°€ì˜¤ê³  ìˆìŠµë‹ˆë‹¤. ë‚¡ì€ ê²ƒì„ ë²„ë¦¬ê³  ìƒˆë¡œìš´ ê²ƒì„ ë°›ì•„ë“¤ì¼ ë•Œì…ë‹ˆë‹¤.",
    advice: "ë³€í™”ë¥¼ ë‘ë ¤ì›Œí•˜ì§€ ë§ê³  ìš©ê¸°ìˆê²Œ ë°›ì•„ë“¤ì´ì„¸ìš”."
  },

  stable: {
    cards: ["The Emperor", "Four of Wands", "Ten of Pentacles", "Two of Cups"],
    message:
      "ì•ˆì •ê³¼ ì¡°í™”ì˜ ì‹œê¸°ì…ë‹ˆë‹¤. í˜„ì¬ì˜ í‰í™”ë¥¼ ì¦ê¸°ë˜ ë¯¸ë˜ë„ ì¤€ë¹„í•˜ì„¸ìš”.",
    advice: "ê¸°ì´ˆë¥¼ ë”ìš± íŠ¼íŠ¼íˆ í•˜ê³  ê´€ê³„ë¥¼ ëˆë…íˆ í•˜ì„¸ìš”."
  }
};

// ğŸ’« íŠ¹ë³„ ë©”ì‹œì§€ ìƒì„±ê¸°
const SPECIAL_MESSAGES = {
  // ëª¨ë“  ë©”ì´ì € ì•„ë¥´ì¹´ë‚˜
  all_major:
    "ìš°ì£¼ê°€ ë‹¹ì‹ ì—ê²Œ ì¤‘ìš”í•œ ë©”ì‹œì§€ë¥¼ ì „í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì¸ìƒì˜ í° ì „í™˜ê¸°ì— ìˆìœ¼ë‹ˆ ê°ë³„íˆ ì£¼ì˜ë¥¼ ê¸°ìš¸ì´ì„¸ìš”.",

  // ëª¨ë“  ê°™ì€ ìŠˆíŠ¸
  all_same_suit: {
    wands: "ì—´ì •ê³¼ ì°½ì˜ì„±ì˜ ë¶ˆê½ƒì´ íƒ€ì˜¤ë¥´ê³  ìˆìŠµë‹ˆë‹¤. ì§€ê¸ˆì´ í–‰ë™í•  ë•Œì…ë‹ˆë‹¤!",
    cups: "ê°ì •ì˜ ë°”ë‹¤ì— ì ê²¨ ìˆìŠµë‹ˆë‹¤. ì§ê´€ì„ ë¯¿ê³  ì‚¬ë‘ìœ¼ë¡œ ëª¨ë“  ê²ƒì„ í•´ê²°í•˜ì„¸ìš”.",
    swords:
      "ëª…í™•í•œ ì‚¬ê³ ì™€ ì§„ì‹¤ ì¶”êµ¬ê°€ í•„ìš”í•©ë‹ˆë‹¤. ë…¼ë¦¬ì ìœ¼ë¡œ ìƒí™©ì„ ë¶„ì„í•˜ì„¸ìš”.",
    pentacles:
      "ë¬¼ì§ˆì  ì•ˆì •ê³¼ ì‹¤ìš©ì„±ì´ ì¤‘ìš”í•œ ì‹œê¸°ì…ë‹ˆë‹¤. í˜„ì‹¤ì ì¸ ê³„íšì„ ì„¸ìš°ì„¸ìš”."
  },

  // ì—°ì† ìˆ«ì
  sequential_numbers:
    "ë‹¨ê³„ì ì¸ ì„±ì¥ê³¼ ë°œì „ì´ ì´ë£¨ì–´ì§€ê³  ìˆìŠµë‹ˆë‹¤. ìì—°ìŠ¤ëŸ¬ìš´ íë¦„ì„ ë”°ë¥´ì„¸ìš”.",

  // ë§ì€ ì—­ë°©í–¥
  many_reversed:
    "ë‚´ë©´ì˜ ë¸”ë¡ì´ë‚˜ ì–µì••ëœ ì—ë„ˆì§€ê°€ ìˆìŠµë‹ˆë‹¤. ìê¸° ì„±ì°°ì˜ ì‹œê°„ì´ í•„ìš”í•©ë‹ˆë‹¤.",

  // ê· í˜•ì¡íŒ ë°°ì¹˜
  balanced_spread:
    "ì™„ë²½í•œ ê· í˜•ê³¼ ì¡°í™”ë¥¼ ì´ë£¨ê³  ìˆìŠµë‹ˆë‹¤. í˜„ì¬ì˜ ìƒíƒœë¥¼ ìœ ì§€í•˜ë©° ë°œì „ì‹œí‚¤ì„¸ìš”."
};

// ğŸ”® í•´ì„ ë„ìš°ë¯¸ í•¨ìˆ˜ë“¤
const InterpretationHelpers = {
  /**
   * ì§ˆë¬¸ ì¹´í…Œê³ ë¦¬ ìë™ ê°ì§€
   */
  detectQuestionCategory(question) {
    if (!question) return "general";

    const lowerQuestion = question.toLowerCase();

    for (const [category, data] of Object.entries(QUESTION_CATEGORIES)) {
      if (data.keywords.some((keyword) => lowerQuestion.includes(keyword))) {
        return category;
      }
    }

    return "general";
  },

  /**
   * ì¹´ë“œ ì¡°í•© í•´ì„ ì°¾ê¸°
   */
  findCombinationInterpretation(card1, card2) {
    const key1 = `${card1.name}+${card2.name}`;
    const key2 = `${card2.name}+${card1.name}`;

    return CARD_COMBINATIONS[key1] || CARD_COMBINATIONS[key2] || null;
  },

  /**
   * ì „ì²´ì ì¸ ë¶„ìœ„ê¸° ë¶„ì„
   */
  analyzeMood(cards) {
    for (const [mood, data] of Object.entries(MOOD_INTERPRETATIONS)) {
      const moodCards = cards.filter(
        (card) =>
          data.cards.includes(card.name) || data.cards.includes(card.korean)
      );

      if (moodCards.length >= Math.ceil(cards.length / 2)) {
        return { mood, ...data };
      }
    }

    return null;
  },

  /**
   * íŠ¹ë³„ íŒ¨í„´ ê°ì§€
   */
  detectSpecialPatterns(cards) {
    const patterns = [];

    // ëª¨ë“  ë©”ì´ì € ì•„ë¥´ì¹´ë‚˜
    if (cards.every((card) => card.arcana === "major")) {
      patterns.push({ type: "all_major", message: SPECIAL_MESSAGES.all_major });
    }

    // ê°™ì€ ìŠˆíŠ¸
    const suits = cards.filter((c) => c.suit).map((c) => c.suit);
    const suitCounts = suits.reduce((acc, suit) => {
      acc[suit] = (acc[suit] || 0) + 1;
      return acc;
    }, {});

    const dominantSuit = Object.entries(suitCounts).sort(
      ([, a], [, b]) => b - a
    )[0];

    if (dominantSuit && dominantSuit[1] === cards.length) {
      patterns.push({
        type: "all_same_suit",
        suit: dominantSuit[0],
        message: SPECIAL_MESSAGES.all_same_suit[dominantSuit[0]]
      });
    }

    // ë§ì€ ì—­ë°©í–¥
    const reversedCount = cards.filter((c) => c.isReversed).length;
    if (reversedCount > cards.length * 0.6) {
      patterns.push({
        type: "many_reversed",
        message: SPECIAL_MESSAGES.many_reversed
      });
    }

    return patterns;
  },

  /**
   * ê°œì¸í™”ëœ ë©”ì‹œì§€ ìƒì„±
   */
  generatePersonalizedMessage(cards, question, userName) {
    const category = this.detectQuestionCategory(question);
    const mood = this.analyzeMood(cards);
    const patterns = this.detectSpecialPatterns(cards);

    let message = `${userName}ë‹˜, `;

    // ì¹´í…Œê³ ë¦¬ë³„ ì¸ì‚¬
    if (category !== "general") {
      message += `${QUESTION_CATEGORIES[category].name}ì— ëŒ€í•œ ë‹µì„ ì°¾ê³  ê³„ì‹œëŠ”êµ°ìš”. `;
    }

    // ë¶„ìœ„ê¸° ë©”ì‹œì§€
    if (mood) {
      message += mood.message + " ";
    }

    // íŠ¹ë³„ íŒ¨í„´ ë©”ì‹œì§€
    if (patterns.length > 0) {
      message += patterns[0].message + " ";
    }

    // ë§ˆë¬´ë¦¬ ì¡°ì–¸
    message += "ì¹´ë“œê°€ ì „í•˜ëŠ” ë©”ì‹œì§€ì— ê·€ ê¸°ìš¸ì—¬ë³´ì„¸ìš”.";

    return message;
  }
};

// ğŸŒŸ ëª¨ë“ˆ ë‚´ë³´ë‚´ê¸°
module.exports = {
  QUESTION_CATEGORIES,
  CARD_COMBINATIONS,
  TRIPLE_SPREAD_INTERPRETATIONS,
  CELTIC_CROSS_INTERPRETATIONS,
  MOOD_INTERPRETATIONS,
  SPECIAL_MESSAGES,
  InterpretationHelpers
};
